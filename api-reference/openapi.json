{
  "openapi": "3.0.0",
  "info": {
    "title": "Fraud Detection API",
    "version": "v012",
    "description": "API for analyzing survey responses to detect fraudulent activity"
  },
  "paths": {
    "/v011": {
      "post": {
        "summary": "Analyze survey responses to detect fraudulent activity",
        "description": "This endpoint analyzes survey responses to detect fraudulent activity. The API only takes data from one participant, and you must make a separate API call for each participant.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RequestData"
              }
            }
          }
        },
        "parameters": [
          {
            "name": "api_key",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "API key for authentication. Include this in the header of your request."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/v011Response"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/v012": {
      "post": {
        "summary": "Analyze survey responses to detect fraudulent activity",
        "description": "This endpoint analyzes survey responses to detect fraudulent activity for version v012. The API only takes data from one participant, and you must make a separate API call for each participant.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RequestDataV012"
              }
            }
          }
        },
        "parameters": [
          {
            "name": "api_key",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "API key for authentication. Include this in the header of your request."
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/v012Response"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "RequestData": {
        "type": "object",
        "properties": {
          "questions": {
            "type": "object",
            "description": "Contains the survey questions. Each key is the id of the question, and the values are the text of the open-ended survey questions as shown to the participant."
          },
          "question_histories": {
            "type": "object",
            "description": "Records the changes made by the participant while answering the survey. Each key is the id of the question, and the value is the array of changes generated by our Javascript tracker."
          },
          "responses": {
            "type": "object",
            "description": "Records the participant's final responses to each question."
          },
          "survey_id": {
            "type": "string",
            "description": "A unique identifier for the survey."
          },
          "participant_id": {
            "type": "string",
            "description": "A unique identifier for the participant."
          }
        },
        "required": ["questions", "responses", "survey_id", "participant_id"]
      },
      "RequestDataV012": {
        "type": "object",
        "properties": {
          "questions": {
            "type": "object",
            "description": "Contains the survey questions for version v012. Each key is the id of the question, and the values are the text of the open-ended survey questions as shown to the participant."
          },
          "question_histories": {
            "type": "object",
            "description": "Records the changes made by the participant while answering the survey for version v012. Each key is the id of the question, and the value is the array of changes generated by our Javascript tracker."
          },
          "responses": {
            "type": "object",
            "description": "Records the participant's final responses to each question for version v012."
          },
          "survey_id": {
            "type": "string",
            "description": "A unique identifier for the survey for version v012."
          },
          "participant_id": {
            "type": "string",
            "description": "A unique identifier for the participant for version v012."
          }
        },
        "required": ["questions", "responses", "survey_id", "participant_id"]
      },
      "v011Response": {
        "type": "object",
        "properties": {
          "error": {
            "type": "boolean",
            "description": "Indicates if there was an error in processing the request."
          },
          "flagged": {
            "type": "boolean",
            "description": "Indicates if any fraudulent activity was detected for version v011. If true, we recommend reviewing the participant's responses."
          },
          "num_checks_failed": {
            "type": "integer",
            "description": "Number of checks that failed for version v011."
          },
          "checks": {
            "type": "object",
            "description": "Details of specific checks and their outcomes for version v011."
          },
          "warning": {
            "type": "string",
            "description": "A message that provides additional context or information about potential issues detected during the request processing for version v011. Only returned if there is a warning."
          },
          "problem": {
            "type": "string",
            "description": "A message that explains why error is True for version v011. Only returned if there is an error."
          }
        }
      },
      "v012Response": {
        "type": "object",
        "properties": {
          "error": {
            "type": "boolean",
            "description": "Indicates if there was an error in processing the request for version v012."
          },
          "flagged": {
            "type": "boolean",
            "description": "Indicates if any fraudulent activity was detected for version v012. If true, we recommend reviewing the participant's responses for version v012."
          },
          "num_checks_failed": {
            "type": "integer",
            "description": "Number of checks that failed for version v012."
          },
          "checks": {
            "type": "object",
            "description": "Details of specific checks and their outcomes for version v012."
          },
          "warning": {
            "type": "string",
            "description": "A message that provides additional context or information about potential issues detected during the request processing for version v012. Only returned if there is a warning."
          },
          "problem": {
            "type": "string",
            "description": "A message that explains why error is True for version v012. Only returned if there is an error."
          },
          "response_group": {
            "type": "object",
            "description": "Dictionary where key corresponds to check and value corresponds to the cluster of duplicated responses."
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "description": "Error message"
          }
        }
      }
    }
  }
}
